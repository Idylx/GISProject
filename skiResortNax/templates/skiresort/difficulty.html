{% extends "index.html" %}
{% load leaflet_tags %}
{% block title %}{% endblock %}
{% block content %}

    {% leaflet_js %}
    {% leaflet_css %}

    <h1>Difficulty</h1>
    <div id="map">{% leaflet_map "slopes" callback="main_map_init" %}</div>



    <script type="text/javascript">
        function main_map_init (map, options) {
            var dataurl = '{% url "slopesdata" %}'
            $.getJSON(dataurl, function (data){
                L.geoJson(data, {onEachFeature: onEachFeature}).addTo(map);
            });
        }


        function getColor(d) {
            switch (d) {
                case 'Blue':
                    return "#33AFFF";
                case 'Red':
                    return "#ff0000";
            }
        }

        function style(feature) {
            return {
            fillColor: getColor(feature.properties.difficulty),
            color :getColor(feature.properties.difficulty) };
        }

        function onEachFeature(feature, layer) {
            if (feature.properties && feature.properties.name) {
                layer.bindPopup(feature.properties.name);
            }
            layer.setStyle(style(feature));

        }
    </script>

{% endblock %}